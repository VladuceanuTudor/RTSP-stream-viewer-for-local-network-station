# ğŸ—ï¸ Arhitectura Sistemului - Diagrame

## Diagrama 1: Flow-ul General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         JETSON AGX XAVIER                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  DeepStream Pipeline                                           â”‚ â”‚
â”‚  â”‚  â€¢ Video Input (360Â° camera sau fiÈ™ier)                       â”‚ â”‚
â”‚  â”‚  â€¢ AI Inference (object detection)                            â”‚ â”‚
â”‚  â”‚  â€¢ nvdsosd (draw bounding boxes)                              â”‚ â”‚
â”‚  â”‚  â€¢ H.264 Encoding                                             â”‚ â”‚
â”‚  â”‚  â€¢ RTSP Sink (port 8554)                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚  Output: rtsp://192.168.1.100:8554/video360                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ RTSP Stream
                           â”‚ (H.264 + RTP packets)
                           â”‚ LAN Network
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   STAÈšIA DE VIZUALIZARE (Laptop)                     â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              MediaMTX Server (Go Binary)                        â”‚â”‚
â”‚  â”‚                                                                  â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚â”‚
â”‚  â”‚  â”‚ RTSP Input â”‚ â† rtsp://192.168.1.100:8554/video360           â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚â”‚
â”‚  â”‚        â”‚                                                         â”‚â”‚
â”‚  â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚â”‚
â”‚  â”‚        â”‚             â”‚                                          â”‚â”‚
â”‚  â”‚        â–¼             â–¼                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚â”‚
â”‚  â”‚  â”‚ WebRTC  â”‚   â”‚   HLS   â”‚                                     â”‚â”‚
â”‚  â”‚  â”‚ :8889   â”‚   â”‚  :8888  â”‚                                     â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚          â”‚             â”‚                                            â”‚
â”‚          â”‚             â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚           React Web Application (port 3000)                     â”‚â”‚
â”‚  â”‚                                                                  â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚ Stream         â”‚  â”‚ Video360         â”‚  â”‚ Recording      â”‚ â”‚â”‚
â”‚  â”‚  â”‚ Controller     â”‚  â”‚ Viewer           â”‚  â”‚ Panel          â”‚ â”‚â”‚
â”‚  â”‚  â”‚                â”‚  â”‚                  â”‚  â”‚                â”‚ â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Connect      â”‚  â”‚ â€¢ Three.js       â”‚  â”‚ â€¢ Start/Stop   â”‚ â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Protocol     â”‚  â”‚ â€¢ Sphere (360Â°)  â”‚  â”‚ â€¢ Download     â”‚ â”‚â”‚
â”‚  â”‚  â”‚   Select       â”‚  â”‚ â€¢ OrbitControls  â”‚  â”‚ â€¢ MediaRecorderâ”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                                  â”‚â”‚
â”‚  â”‚  Output: Video stream vizualizat + Bounding boxes               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚           Script-uri Salvare (OpÈ›ional)                          â”‚â”‚
â”‚  â”‚                                                                   â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚â”‚
â”‚  â”‚  â”‚ record_stream â”‚              â”‚ record_stream  â”‚              â”‚â”‚
â”‚  â”‚  â”‚     .sh       â”‚              â”‚     .py        â”‚              â”‚â”‚
â”‚  â”‚  â”‚               â”‚              â”‚                â”‚              â”‚â”‚
â”‚  â”‚  â”‚ FFmpeg Copy   â”‚              â”‚ OpenCV Preview â”‚              â”‚â”‚
â”‚  â”‚  â”‚ MP4 Output    â”‚              â”‚ Snapshots      â”‚              â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚â”‚
â”‚  â”‚                                                                   â”‚â”‚
â”‚  â”‚  Output: ./recordings/*.mp4 sau *.webm                           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagrama 2: Protocol Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PROTOCOL LAYERS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  JETSON                    MEDIAMTX              BROWSER        â”‚
â”‚  â•â•â•â•â•â•â•                   â•â•â•â•â•â•â•â•              â•â•â•â•â•â•â•â•        â”‚
â”‚                                                                  â”‚
â”‚  [Video]                                                         â”‚
â”‚     â†“                                                            â”‚
â”‚  [H.264]                                                         â”‚
â”‚     â†“                                                            â”‚
â”‚  [RTSP] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ [RTSP]                                 â”‚
â”‚   8554                    Ingestion                             â”‚
â”‚                              â†“                                   â”‚
â”‚                          [Transcode/                            â”‚
â”‚                           Repackage]                            â”‚
â”‚                              â†“                                   â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                     â†“                 â†“                          â”‚
â”‚                  [WebRTC]          [HLS]                        â”‚
â”‚                   :8889             :8888                       â”‚
â”‚                     â†“                 â†“                          â”‚
â”‚                  [WHEP]            [HTTP]                       â”‚
â”‚                  Protocol          GET                          â”‚
â”‚                     â†“                 â†“                          â”‚
â”‚                  [RTP] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ [Segment]                    â”‚
â”‚                   over              .ts files                   â”‚
â”‚                  [UDP]               â†“                          â”‚
â”‚                     â†“                 â†“                          â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                               â†“                                  â”‚
â”‚                          [Browser]                              â”‚
â”‚                       WebRTC/HTML5                              â”‚
â”‚                         Video API                               â”‚
â”‚                               â†“                                  â”‚
â”‚                       [Video Element]                           â”‚
â”‚                               â†“                                  â”‚
â”‚                       [Three.js Texture]                        â”‚
â”‚                               â†“                                  â”‚
â”‚                       [Sphere Geometry]                         â”‚
â”‚                               â†“                                  â”‚
â”‚                       [WebGL Render]                            â”‚
â”‚                               â†“                                  â”‚
â”‚                         [Display]                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagrama 3: Data Flow - Recording

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  RECORDING DATA FLOW                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   Browser Recording (MediaRecorder API)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   [Video Element]
         â†“
   [srcObject = MediaStream]
         â†“
   [MediaRecorder(stream)]
         â†“
   [ondataavailable] â”€â”€â†’ chunks[]
         â†“
   [onstop]
         â†“
   [Blob(chunks, {type: 'video/webm'})]
         â†“
   [URL.createObjectURL(blob)]
         â†“
   [<a download>] â”€â”€â†’ Local filesystem
         â†“
   ğŸ“ ~/Downloads/recording-360-*.webm


   FFmpeg Recording (Bash Script)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   rtsp://localhost:8554/jetson360
         â†“
   [FFmpeg -rtsp_transport tcp]
         â†“
   [Copy codec (-c copy)]
         â†“
   [MP4 container]
         â†“
   [movflags +faststart]
         â†“
   ğŸ“ ./recordings/recording_360_*.mp4


   Python Recording (OpenCV)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   rtsp://localhost:8554/jetson360
         â†“
   [cv2.VideoCapture(url)]
         â†“
   [cap.read()] â”€â”€â†’ frame
         â†“
   [cv2.VideoWriter]
         â†“
   [writer.write(frame)]
         â†“
   ğŸ“ ./recordings/recording_360_*.mp4
```

---

## Diagrama 4: Component Hierarchy (React)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         App.js                                   â”‚
â”‚  â€¢ State management (streamUrl, isConnected)                    â”‚
â”‚  â€¢ WebRTC/HLS connection logic                                  â”‚
â”‚  â€¢ Video ref management                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
        â–¼              â–¼              â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Stream  â”‚   â”‚ Video360 â”‚   â”‚Recording â”‚
   â”‚Controllerâ”‚   â”‚ Viewer   â”‚   â”‚  Panel   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚
        â”‚              â”‚              â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”         â”‚
        â”‚         â”‚         â”‚         â”‚
        â–¼         â–¼         â–¼         â–¼
   [Connect]  [Canvas]  [Controls] [Record]
   [Settings] [Sphere]  [Info]     [Download]
              [Camera]
              [Orbit]


   Video360Viewer.js
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   <Canvas>
     <CameraController />
     <VideoSphere videoRef={...}>
       <sphereGeometry />
       <meshBasicMaterial map={videoTexture} />
     </VideoSphere>
     <OrbitControls />
   </Canvas>


   StreamController.js
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   [Status Indicator]
   [WebRTC Button]
   [HLS Button]
   [Advanced Settings]
   [Connection Guide]


   RecordingPanel.js
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   [Recording Status]
   [Start/Stop Button]
   [Recorded Files List]
   [Download Button]
   [Recording Info]
```

---

## Diagrama 5: Docker Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Compose Setup                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

docker-compose.yml
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

services:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ mediamtx                                                     â”‚
  â”‚ â”œâ”€ Image: bluenviron/mediamtx:latest                       â”‚
  â”‚ â”œâ”€ Network: host                                            â”‚
  â”‚ â”œâ”€ Volumes:                                                 â”‚
  â”‚ â”‚   â€¢ ./mediamtx/mediamtx.yml:/mediamtx.yml               â”‚
  â”‚ â”‚   â€¢ ./recordings:/recordings                            â”‚
  â”‚ â””â”€ Ports: 8554, 8888, 8889, 9997, 9998                     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ depends_on
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ react-viewer                                                 â”‚
  â”‚ â”œâ”€ Build: ./react-viewer/Dockerfile                        â”‚
  â”‚ â”œâ”€ Multi-stage:                                             â”‚
  â”‚ â”‚   Stage 1: node:18-alpine (build)                       â”‚
  â”‚ â”‚   Stage 2: nginx:alpine (serve)                         â”‚
  â”‚ â”œâ”€ Environment:                                             â”‚
  â”‚ â”‚   â€¢ REACT_APP_MEDIAMTX_HOST                             â”‚
  â”‚ â”‚   â€¢ REACT_APP_WEBRTC_PORT                               â”‚
  â”‚ â””â”€ Ports: 3000                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

volumes:
  recordings: {}
```

---

## Diagrama 6: Network Ports

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PORT MAPPING                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Port    â”‚ Service           â”‚ Protocol â”‚ Purpose             â”‚
â”‚  â•â•â•â•â•â•â•â•â”‚â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚â•â•â•â•â•â•â•â•â•â•â”‚â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  8554    â”‚ MediaMTX RTSP     â”‚ TCP      â”‚ RTSP ingest/output â”‚
â”‚  8888    â”‚ MediaMTX HLS      â”‚ HTTP     â”‚ HLS streaming      â”‚
â”‚  8889    â”‚ MediaMTX WebRTC   â”‚ HTTP/WS  â”‚ WebRTC (WHEP)      â”‚
â”‚  3000    â”‚ React App         â”‚ HTTP     â”‚ Web interface      â”‚
â”‚  9997    â”‚ MediaMTX API      â”‚ HTTP     â”‚ Configuration API  â”‚
â”‚  9998    â”‚ MediaMTX Metrics  â”‚ HTTP     â”‚ Prometheus metrics â”‚
â”‚                                                                 â”‚
â”‚  Jetson Side:                                                   â”‚
â”‚  8554    â”‚ DeepStream RTSP   â”‚ TCP      â”‚ Video source       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   LAN Topology
   â•â•â•â•â•â•â•â•â•â•â•â•
   
   [Router/Switch]
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€ Jetson AGX Xavier (192.168.1.100:8554)
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ Laptop (192.168.1.50)
                      â”œâ”€ MediaMTX (:8554, :8888, :8889)
                      â””â”€ React App (:3000)
```

---

## Diagrama 7: File Structure

```
rtsp-viewer-project/
â”‚
â”œâ”€â”€ ğŸ“„ DocumentaÈ›ie
â”‚   â”œâ”€â”€ INDEX.md              â† Start aici
â”‚   â”œâ”€â”€ QUICKSTART.md         â† 5 min setup
â”‚   â”œâ”€â”€ README.md             â† DocumentaÈ›ie completÄƒ
â”‚   â”œâ”€â”€ LOCAL_DEV.md          â† Dev fÄƒrÄƒ Docker
â”‚   â”œâ”€â”€ CONFIG_EXAMPLES.md    â† 10+ exemple
â”‚   â””â”€â”€ PROJECT_SUMMARY.md    â† Overview
â”‚
â”œâ”€â”€ âš™ï¸ Configurare
â”‚   â”œâ”€â”€ .env                  â† Variables (EDITEAZÄ‚!)
â”‚   â”œâ”€â”€ docker-compose.yml    â† Orchestration
â”‚   â””â”€â”€ Makefile              â† Comenzi rapide
â”‚
â”œâ”€â”€ ğŸ”§ MediaMTX
â”‚   â””â”€â”€ mediamtx/
â”‚       â””â”€â”€ mediamtx.yml      â† Config RTSPâ†’WebRTC
â”‚
â”œâ”€â”€ ğŸŒ React App
â”‚   â””â”€â”€ react-viewer/
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ App.js                    â† Main component
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”‚   â”œâ”€â”€ Video360Viewer.js    â† Three.js 360Â°
â”‚       â”‚   â”‚   â”œâ”€â”€ StreamController.js  â† Connection
â”‚       â”‚   â”‚   â””â”€â”€ RecordingPanel.js    â† Recording
â”‚       â”‚   â””â”€â”€ *.css                    â† Styles
â”‚       â”œâ”€â”€ public/
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ Dockerfile        â† Build container
â”‚       â””â”€â”€ nginx.conf        â† Production server
â”‚
â””â”€â”€ ğŸ“œ Scripts
    â””â”€â”€ scripts/
        â”œâ”€â”€ record_stream.sh     â† FFmpeg recording
        â”œâ”€â”€ record_stream.py     â† OpenCV recording
        â””â”€â”€ validate.sh          â† System check
```

---

**LegendÄƒ:**
- `â†’` : Data flow
- `â†“` : Processing step
- `â”Œâ”€â”` : Component/Service
- `â”œâ”€â”¤` : Dependency
- `â•â•â•` : Protocol layer
- `ğŸ“` : File output

---

*Diagrame create pentru proiectul RTSP 360Â° Viewer*  
*Vladuceanu Tudor*
